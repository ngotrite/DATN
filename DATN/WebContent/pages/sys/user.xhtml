<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:form id="form-user" class="container-fluid">
	<div class="row">
		<div class="col-xs-12 col-md-2">
			<p:outputLabel value="#{msg['user.ID']}" />
		</div>
		<div class="col-xs-12 col-md-4">
			<p:inputText value="#{userBean.sysUser.id}" readonly="true"
				styleClass="form-control" />
		</div>
		<div class="col-xs-12 col-md-2">
			<p:outputLabel value="#{msg['user.role']}" />
		</div>
		<div class="col-xs-12 col-md-4">
			<h:selectOneMenu required="true" value="#{userBean.roleID}"
				styleClass="form-control select">
				<f:selectItems value="#{userBean.listSysRole}" var="role"
					itemValue="#{role.id}" itemLabel="#{role.name}"></f:selectItems>
			</h:selectOneMenu>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12 col-md-2">
			<p:outputLabel value="#{msg['user.userName']}" />
		</div>
		<div class="col-xs-12 col-md-4">
			<p:inputText value="#{userBean.sysUser.userName}"
				styleClass="form-control" maxlength="100" />
		</div>
		<div class="col-xs-12 col-md-2">
			<p:outputLabel value="#{msg['user.expireDate']}" />
		</div>
		<div class="col-xs-12 col-md-4">
			<p:calendar value="#{userBean.sysUser.expireDate}"
				pattern="#{userSession.dateFormat}">
			</p:calendar>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12 col-md-2">
			<p:outputLabel value="#{msg['user.firstName']}" />
		</div>
		<div class="col-xs-12 col-md-4">
			<p:inputText value="#{userBean.sysUser.firstName}"
				styleClass="form-control" maxlength="100" />
		</div>
		<div class="col-xs-12 col-md-2">
			<p:outputLabel value="#{msg['user.password']}" />
		</div>
		<div class="col-xs-12 col-md-4">
			<p:password value="#{userBean.sysUser.password}"
				styleClass="form-control" maxlength="100" />
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12 col-md-2">
			<p:outputLabel value="#{msg['user.lastName']}" />
		</div>
		<div class="col-xs-12 col-md-4">
			<p:inputText value="#{userBean.sysUser.lastName}"
				styleClass="form-control" maxlength="100" />
		</div>
		<div class="col-xs-12 col-md-2">
			<p:outputLabel value="#{msg['user.email']}" />
		</div>
		<div class="col-xs-12 col-md-4">
			<p:inputText value="#{userBean.sysUser.email}"
				styleClass="form-control" maxlength="100" />
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12 col-md-2">
			<p:outputLabel value="#{msg['user.fullName']}" />
		</div>
		<div class="col-xs-12 col-md-4">
			<p:inputText value="#{userBean.sysUser.fullName}"
				styleClass="form-control" maxlength="100" />
		</div>
		<div class="col-xs-12 col-md-2">
			<p:outputLabel value="#{msg['user.remark']}" />
		</div>
		<div class="col-xs-12 col-md-4">
			<p:inputText value="#{userBean.sysUser.remark}"
				styleClass="form-control" maxlength="255" />
		</div>
	</div>

	<div class="row">
		<div class="col-xs-12 col-md-4 col-md-offset-8">
			<p:commandButton id="btnNew" value="#{msg['common.addNew']}"
				actionListener="#{userBean.btnNew}" rendered="#{!userBean.editing}"
				update="form-user" styleClass="btn btn-primary" immediate="true"
				resetValues="true">
			</p:commandButton>
			<p:commandButton id="btnSave" value="#{msg['common.save']}"
				actionListener="#{userBean.btnSave}" rendered="#{userBean.editing}"
				update="ID_UserTable form-user" styleClass="btn btn-default">
			</p:commandButton>
			<p:commandButton id="btnCancel" value="#{msg['common.cancel']}"
				actionListener="#{userBean.btnCancel}"
				rendered="#{userBean.editing}" update="form-user"
				styleClass="btn btn-default" immediate="true" resetValues="true">
			</p:commandButton>
		</div>
	</div>

	<p:dataTable id="ID_UserTable" var="user"
		value="#{userBean.listSysUser}" rowIndexVar="rowIndex"
		paginator="true" rows="20" paginatorPosition="bottom"
		selectionMode="single" rowKey="#{user.id}">

		<!-- <p:ajax event="rowSelect" listener="#{userBean.onRowSelect}" update="form-user"/> -->

		<p:column headerText="#" styleClass="widthSTTcolumn">
			<h:outputText value="#{rowIndex+1}" />
		</p:column>
		<p:column headerText="#{msg['user.userName']}"
			sortBy="#{user.userName}" filterBy="#{user.userName}"
			filterMatchMode="contains">
			<h:outputText value="#{user.userName}" />
		</p:column>
		<p:column headerText="#{msg['user.fullName']}"
			sortBy="#{user.fullName}" filterBy="#{user.fullName}"
			filterMatchMode="contains">
			<h:outputText value="#{user.fullName}" />
		</p:column>
		<p:column headerText="#{msg['user.role']}" sortBy="#{user.role.name}"
			filterBy="#{user.role.name}" filterMatchMode="contains">
			<h:outputText value="#{user.role.name}" />
		</p:column>
		<p:column headerText="#{msg['user.expireDate']}"
			sortBy="#{user.expireDate}">
			<h:outputText value="#{user.expireDate}" />
		</p:column>
		<p:column headerText="#{msg['user.remark']}" sortBy="#{user.remark}"
			filterBy="#{user.remark}" filterMatchMode="contains">
			<h:outputText value="#{user.remark}" />
		</p:column>

		<p:column headerText="#{msg['common.action']}"
			styleClass="actionColumn">
			<p:commandLink
				actionListener="#{userBean.onRowEdit(user)}"
				update="form-user"
				immediate="true"
				styleClass="btn btn-sm btn-action-edit colorStrongGreen">
				<i class="fa fa-pencil icon-only mr-0"></i>
			</p:commandLink>					
			<p:commandLink
				actionListener="#{userBean.onRowDelete(user)}"
				update="ID_UserTable"
				immediate="true"
				styleClass="btn btn-sm btn-action-del colorRed">
				<i class="fa fa-times icon-only mr-0"></i>
				<p:confirm header="#{msg['common.delete']}"
					message="#{msg['common.confirmDelete']}" icon="ui-icon-alert" />
			</p:commandLink>
		</p:column>
	</p:dataTable>
</h:form>
</html>